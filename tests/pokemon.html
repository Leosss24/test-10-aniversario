<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>¬øQu√© Pok√©mon Inicial Eres?</title>
  <style>
    :root{
      --primario:#E0A542;
      --secundario:#2B191A;
      --acento:#874037;
      --texto:#FFEBD2;
      --card:#3a2324;
      --borde:#5a2d2a;
    }
    *{box-sizing:border-box}
    body {
      font-family: 'Segoe UI', system-ui, -apple-system, Roboto, sans-serif;
      background: radial-gradient(1200px 800px at 20% 0%, #3c2223 0%, var(--secundario) 60%);
      color: var(--texto);
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 860px;
      margin: 40px auto;
      background: var(--card);
      padding: 28px;
      border-radius: 18px;
      box-shadow: 0 14px 40px rgba(0,0,0,0.45);
      border: 1px solid var(--borde);
    }
    h1 {
      text-align: center;
      margin: 0 0 18px;
      color: var(--primario);
      letter-spacing: .5px;
    }
    .sub {
      text-align:center;
      margin: 0 0 24px;
      color: #f7d9a0;
      opacity:.9;
      font-size:14px;
    }
    .btn-nav {
      display: inline-block;
      margin: 10px 6px;
      padding: 10px 16px;
      font-size: 14px;
      background-color: var(--acento);
      border-radius: 10px;
      text-decoration: none;
      color: #ffe6d0;
      border: 1px solid #a24a40;
      cursor: pointer;
      transition: transform .08s ease, background .2s ease;
    }
    .btn-nav:hover { background-color: #9a493f; transform: translateY(-1px); }
    .question { margin-bottom: 18px; }
    .question h3 { font-size: 20px; margin: 6px 0 10px; color:#ffdba0; }
    .options button {
      background-color: #2f1c1d;
      border: 2px solid var(--borde);
      border-radius: 12px;
      padding: 12px 14px;
      margin: 6px 0;
      width: 100%;
      text-align: left;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.2s, border-color .2s;
      color: #ffe6d0;
    }
    .options button:hover { background-color: #3a2324; border-color: var(--acento); }
    #navigation { text-align: center; margin-top: 14px; }
    #result { text-align: center; margin-top: 28px; }
    #result img {
      max-width: 160px;
      margin-top: 14px;
      image-rendering: pixelated;
      background:#1f1213;
      border-radius: 16px;
      padding: 12px;
      border:1px solid var(--borde);
    }
    .badge {
      display:inline-block; padding:4px 10px; border-radius:999px;
      background: #4b2a2a; border:1px solid var(--borde); color:#ffdba0; font-size:12px
    }
    @media (max-width: 640px) {
      .container { padding: 20px; margin: 20px auto; border-radius: 14px;}
      .question h3 { font-size: 18px; }
      .options button { font-size: 15px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>¬øQu√© Pok√©mon Inicial Eres?</h1>
    <p class="sub">12 starters. 12 preguntas. 0 excusas. Responde con el coraz√≥n (y algo de humor).</p>
    <div id="quiz"></div>
    <div id="navigation">
      <button class="btn-nav" onclick="goBack()">‚¨Ö Volver</button>
      <a href="../index.html" class="btn-nav">üè† Inicio</a>
    </div>
    <div id="result"></div>
  </div>

<script>
/* =========================
   DATA: im√°genes y descripciones
   ========================= */
const pokemonImages = {
  Bulbasaur:  "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/1.png",
  Snivy:      "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/495.png",
  Sprigatito: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/906.png",
  Charmander: "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/4.png",
  Scorbunny:  "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/813.png",
  Fuecoco:    "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/909.png",
  Squirtle:   "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/7.png",
  Froakie:    "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/656.png",
  Quaxly:     "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/912.png",
  Chikorita:  "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/152.png",
  Cyndaquil:  "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/155.png",
  Totodile:   "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/158.png"
};

const pokemonDescriptions = {
  Bulbasaur:  "Zen con hojas. Tienes paciencia de santo y olfato para lo que suma. Eres el ‚Äòbuff‚Äô silencioso del equipo.",
  Snivy:      "Estratega con cara de ‚Äòyo ya lo sab√≠a‚Äô. Hablas poco, calculas mucho. Elegancia pasivo-agresiva.",
  Sprigatito: "Creativo con chispa adorable. Todo lo haces bonito ‚Äî incluso el caos (que, casualmente, provocas t√∫).",
  Charmander: "Energ√≠a y drama en proporciones perfectas. Si no brilla, lo prendes fuego. Metaf√≥ricamente‚Ä¶ casi siempre.",
  Scorbunny:  "Velocidad de meme. Compites hasta por qui√©n bosteza menos. Entusiasmo que contagia y desordena a la vez.",
  Fuecoco:    "Caos buena onda. Improvisas con sonrisa de ‚Äòesto saldr√° incre√≠ble‚Äô y, oye, muchas veces sale.",
  Squirtle:   "Fr√≠o en la cabeza, c√°lido en el grupo. Paragolpes oficial cuando todo arde. Soluciones pr√°cticas, cero postureo.",
  Froakie:    "Sigilo de ninja social. Observas primero, saltas despu√©s. Te salen los planes limpios.",
  Quaxly:     "Est√©tica y actitud. Entras como si hubiera alfombra roja. Sorprendentemente, sueles tener raz√≥n.",
  Chikorita:  "Amabilidad tocha. Te preocupas por todos, incluso por los que no lo merecen. Cuidas, pero tambi√©n lideras.",
  Cyndaquil:  "Introvertido con fuego interior. Calmas por fuera, detonas por dentro. Cuando haces click, no hay quien te pare.",
  Totodile:   "Risa f√°cil y cero miedo al rid√≠culo. Vas de cabeza y ya veremos. A veces sale √©pico; otras, meme. Bien igual."
};

/* =========================
   CONFIGURACI√ìN DE BALANCE 3‚Äì2‚Äì1
   - 12 Pok√©mon
   - 12 preguntas x 4 respuestas
   - Cada respuesta punt√∫a a 3 Pok√©mon (3,2,1)
   - Cada Pok√©mon aparece exactamente 12 veces:
       4 veces con 3 puntos, 4 con 2, 4 con 1
   ========================= */
const starters = [
  "Bulbasaur","Snivy","Sprigatito",
  "Charmander","Scorbunny","Fuecoco",
  "Squirtle","Froakie","Quaxly",
  "Chikorita","Cyndaquil","Totodile"
];

// Textos de 12 preguntas con 4 opciones (sin puntos a√∫n)
const questionTexts = [
  {
    q: "Plan de s√°bado perfecto:",
    a: ["Paseo chill y picnic.", "Quedar para algo de deporte.", "Tour de cafeter√≠as bonitas.", "Quedar en casa con juegos y snacks."]
  },
  {
    q: "Tu rol espont√°neo en el grupo:",
    a: ["El que calma y organiza.", "El que enciende el √°nimo.", "El que observa y ejecuta.", "El que hace re√≠r y rompe el hielo."]
  },
  {
    q: "Si fuera una app, ser√≠as:",
    a: ["Calendario con stickers.", "Cron√≥metro de sprints.", "Notas minimalistas.", "Editor de fotos con filtros."]
  },
  {
    q: "Tu merienda ideal:",
    a: ["Algo verde y fresco.", "Picante o nada.", "Un cl√°sico dulce.", "Lo que haya, pero bonito."]
  },
  {
    q: "En crisis, tu primera reacci√≥n:",
    a: ["Respirar y evaluar.", "Actuar ya y ajustar en marcha.", "Buscar info y datos.", "Hacer re√≠r para desatascar."]
  },
  {
    q: "Look que te define:",
    a: ["C√≥modo funcional.", "Sport con toque llamativo.", "Sencillo y limpio.", "Est√©tico y arriesgado."]
  },
  {
    q: "Juego de mesa, ¬øqu√© eliges?",
    a: ["Cooperativo estrat√©gico.", "Competitivo r√°pido.", "Puzzle/escape.", "Party game absurdo."]
  },
  {
    q: "Tu hora favorita del d√≠a:",
    a: ["Ma√±ana con calma.", "Mediod√≠a con ritmo.", "Tarde concentrada.", "Noche creativa."]
  },
  {
    q: "Viajando, priorizas:",
    a: ["Naturaleza y caminar.", "Actividades y adrenalina.", "Museos y aprender.", "Caf√©s y fotos top."]
  },
  {
    q: "Cuando te bloqueas:",
    a: ["Pausa y vuelvo.", "Sigo hasta que salga.", "Busco tutorial/gu√≠a.", "Cambio de tarea y vuelvo con chiste."]
  },
  {
    q: "Tu cualidad secreta:",
    a: ["Paciencia infinita.", "Motivaci√≥n a prueba de todo.", "Observaci√≥n quir√∫rgica.", "Carisma accidental."]
  },
  {
    q: "Para cerrar el d√≠a:",
    a: ["Estiramientos/lectura.", "Entrenito corto.", "Diario/planificar.", "Meme + snack."]
  }
];

// Generador balanceado 3‚Äì2‚Äì1 con rotaci√≥n latina.
// Para cada pregunta q:
// - rotamos el array de starters por q posiciones,
// - lo partimos en 4 grupos de 3 (cada grupo es una respuesta),
// - dentro del grupo, posiciones pos=0..2 obtienen pesos seg√∫n (pos + q) % 3 -> [3,2,1]
function buildBalancedQuestions() {
  const weights = [3,2,1];
  const questions = [];
  for (let q=0; q<questionTexts.length; q++){
    const base = starters.slice(q).concat(starters.slice(0,q)); // rotaci√≥n
    const groups = [ base.slice(0,3), base.slice(3,6), base.slice(6,9), base.slice(9,12) ];
    const answers = [];
    for (let ai=0; ai<4; ai++){
      const points = {};
      const group = groups[ai];
      for (let pos=0; pos<3; pos++){
        const who = group[pos];
        const w = weights[(pos + q) % 3]; // rotaci√≥n de pesos por pregunta
        points[who] = w;
      }
      answers.push({ text: questionTexts[q].a[ai], points });
    }
    questions.push({ question: questionTexts[q].q, answers });
  }
  return questions;
}

// Construimos el cuestionario balanceado
const questions = buildBalancedQuestions();

// (Opcional) Validador r√°pido en consola: cada pok√©mon debe tener 4x3pts, 4x2pts, 4x1pt
// abre la consola y ejecuta validateBalance();
function validateBalance(){
  const tally = {};
  starters.forEach(s => tally[s] = {1:0,2:0,3:0});
  questions.forEach(q => q.answers.forEach(a => {
    Object.entries(a.points).forEach(([k,v]) => { tally[k][v]++; });
  }));
  console.table(tally);
}

/* =========================
   L√ìGICA DEL QUIZ
   ========================= */
const quizContainer = document.getElementById("quiz");
const resultContainer = document.getElementById("result");

let currentQuestion = 0;
let scores = {};
let history = [];

function showQuestion() {
  const q = questions[currentQuestion];
  const questionHTML = `
    <div class="badge">Pregunta ${currentQuestion+1} de ${questions.length}</div>
    <div class="question">
      <h3>${q.question}</h3>
      <div class="options">
        ${q.answers.map((a, i) => `<button onclick="selectAnswer(${i})">${a.text}</button>`).join("")}
      </div>
    </div>`;
  quizContainer.innerHTML = questionHTML;
  resultContainer.innerHTML = "";
}

function selectAnswer(index) {
  const selected = questions[currentQuestion].answers[index];
  history.push(index);
  for (let poke in selected.points) {
    scores[poke] = (scores[poke] || 0) + selected.points[poke];
  }
  currentQuestion++;
  if (currentQuestion < questions.length) {
    showQuestion();
  } else {
    showResult();
  }
}

function goBack() {
  if (currentQuestion > 0) {
    const lastIndex = history.pop();
    const lastAnswer = questions[currentQuestion - 1].answers[lastIndex];
    for (let poke in lastAnswer.points) {
      scores[poke] -= lastAnswer.points[poke];
    }
    currentQuestion--;
    showQuestion();
  }
}

function showResult() {
  quizContainer.innerHTML = "";
  let best = null;
  let max = -Infinity;
  for (let poke in scores) {
    if (scores[poke] > max) { max = scores[poke]; best = poke; }
  }
  const description = pokemonDescriptions[best] || "Misterioso y con potencial. Literalmente un huevo sorpresa.";
  const image = pokemonImages[best];
  const tweetText = `¬°Soy ${best} como Pok√©mon inicial! üê£üî•üåøüíß ¬øY t√∫?`;
  const shareUrl = encodeURIComponent(location.href);
  const tweetLink = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}&url=${shareUrl}`;

  resultContainer.innerHTML = `
    <h2>¬°Tu Pok√©mon inicial es <span style="color:var(--primario)">${best}</span>!</h2>
    <img src="${image}" alt="${best}" />
    <p style="font-size:18px; margin-top:12px;">${description}</p>
    <a href="${tweetLink}" target="_blank" class="btn-nav" style="background:#1da1f2; border-color:#198cd1;">Compartir en X/Twitter</a>
  `;
}

showQuestion();
</script>
</body>
</html>
