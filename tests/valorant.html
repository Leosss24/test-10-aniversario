<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>¬øQu√© Agente de Valorant Eres?</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #111823;
      color: #ffffff;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: #282f38;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.4);
      margin-top: 40px;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: #ff4654;
    }
    .btn-nav {
      display: inline-block;
      margin: 10px 5px;
      padding: 10px 15px;
      font-size: 14px;
      background-color: #ba3a46;
      border-radius: 8px;
      text-decoration: none;
      color: #ffffff;
      border: 1px solid #ff4654;
      cursor: pointer;
    }
    .btn-nav:hover {
      background-color: #ff4654;
    }
    .question {
      margin-bottom: 20px;
    }
    .question h3 {
      font-size: 20px;
      margin-bottom: 10px;
    }
    .options button {
      background-color: #282f38;
      border: 2px solid #ba3a46;
      border-radius: 12px;
      padding: 12px;
      margin: 5px 0;
      width: 100%;
      text-align: left;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s;
      color: #ffffff;
    }
    .options button:hover {
      background-color: #ba3a46;
    }
    #navigation {
      text-align: center;
      margin-top: 20px;
    }
    #result {
      text-align: center;
      margin-top: 40px;
    }
    #result img {
      max-width: 200px;
      margin-top: 20px;
      border-radius: 16px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>¬øQu√© Agente de Valorant Eres?</h1>
    <div id="quiz"></div>
    <div id="navigation">
      <button class="btn-nav" onclick="goBack()">‚¨Ö Volver</button>
      <a href="../index.html" class="btn-nav">üè† Inicio</a>
    </div>
    <div id="result"></div>
  </div>

<script>
// =======================
// Agentes (iconos oficiales)
// =======================
const agents = {
  Jett: "https://media.valorant-api.com/agents/add6443a-41bd-e414-f6ad-e58d267f4e95/displayicon.png",
  Phoenix: "https://media.valorant-api.com/agents/eb93336a-449b-9c1b-0a54-a891f7921d69/displayicon.png",
  Sage: "https://media.valorant-api.com/agents/569fdd95-4d10-43ab-ca70-79becc718b46/displayicon.png",
  Sova: "https://media.valorant-api.com/agents/320b2a48-4d9b-a075-30f1-1f93a9b638fa/displayicon.png",
  Raze: "https://media.valorant-api.com/agents/f94c3b30-42be-e959-889c-5aa313dba261/displayicon.png",
  Omen: "https://media.valorant-api.com/agents/8e253930-4c05-31dd-1b6c-968525494517/displayicon.png",
  Viper: "https://media.valorant-api.com/agents/707eab51-4836-f488-046a-cda6bf494859/displayicon.png",
  Killjoy: "https://media.valorant-api.com/agents/1e58de9c-4950-5125-93e9-a0aee9f98746/displayicon.png",
  Breach: "https://media.valorant-api.com/agents/5f8d3a7f-467b-97f3-062c-13acf203c006/displayicon.png",
  Skye: "https://media.valorant-api.com/agents/6f2a04ca-43e0-be17-7f36-b3908627744d/displayicon.png",
  Reyna: "https://media.valorant-api.com/agents/a3bfb853-43b2-7238-a4f1-ad90e9e46bcc/displayicon.png",
  Yoru: "https://media.valorant-api.com/agents/7f94d92c-4234-0a36-9646-3a87eb8b5c89/displayicon.png",
  Fade: "https://media.valorant-api.com/agents/dade69b4-4f5a-8528-247b-219e5a1facd6/displayicon.png",
  Chamber: "https://media.valorant-api.com/agents/22697a3d-45bf-8dd7-4fec-84a9e28c69d7/displayicon.png",
  Harbor: "https://media.valorant-api.com/agents/95b78ed7-4637-86d9-7e41-71ba8c293152/displayicon.png",
  Neon: "https://media.valorant-api.com/agents/bb2a4828-46eb-8cd1-e765-15848195d751/displayicon.png",
  Gekko: "https://media.valorant-api.com/agents/e370fa57-4757-3604-3648-499e1f642d3f/displayicon.png",
  Astra: "https://media.valorant-api.com/agents/41fb69c1-4189-7b37-f117-bcaf1e96f1bf/displayicon.png",
  Deadlock: "https://media.valorant-api.com/agents/cc8b64c8-4b25-4ff9-6e7f-37b4da43d235/displayicon.png", 
  Tejo: "https://media.valorant-api.com/agents/b444168c-4e35-8076-db47-ef9bf368f384/displayicon.png",
  KAYO: "https://media.valorant-api.com/agents/601dbbe7-43ce-be57-2a40-4abd24953621/displayicon.png",
  Cypher: "https://media.valorant-api.com/agents/117ed9e3-49f3-6512-3ccf-0cada7e3823b/displayicon.png",
  Waylay: "https://media.valorant-api.com/agents/df1cb487-4902-002e-5c17-d28e83e78588/displayicon.png",
  Vyse: "https://media.valorant-api.com/agents/efba5359-4016-a1e5-7626-b1ae76895940/displayicon.png",
  Brimstone: "https://media.valorant-api.com/agents/9f0d8ba9-4140-b941-57d3-a7ad57c6b417/displayicon.png",
  Iso: "https://media.valorant-api.com/agents/0e38b510-41a8-5780-5e8f-568b2a4f2d6c/displayicon.png", 
  Clove: "https://media.valorant-api.com/agents/1dbf2edd-4729-0984-3115-daa5eed44993/displayicon.png"
};

// =======================
// Descripciones (tus textos)
// =======================
const descriptions = {
  Jett: "Velocidad, humo y ego. Te tiras a site sin info y te quejas si no te siguen. Pesada nivel Dios.",
  Phoenix: "Brillas m√°s que tus jugadas. Te flasheas solo y haces como si fuera intencional. Ego con patas.",
  Sage: "Sanadora de excusas. Te mueres y la culpa es del equipo. Curas cuando te da la gana.",
  Sova: "Todo c√°lculo, poca alma. Flechas a Narnia, droneo eterno. El frikismo es real.",
  Raze: "La reina del boom. Te explotas t√∫ sola pero te r√≠es igual. Pura anarqu√≠a brasile√±a.",
  Omen: "Fumas, te teleportas y desapareces. Roleplay de fantasma en bronce. Main humo y main drama.",
  Viper: "Todo control, cero duchas. Te crees cient√≠fica pero eres m√°s t√≥xica que tus paredes.",
  Killjoy: "Trapera compulsiva. Te crees genia pero solo campeas y escribes en Python. 0 amigos.",
  Breach: "Pega fuerte y pregunta despu√©s. Si no aturdes a tres, no est√°s jugando. Hablas como claxon.",
  Skye: "Gu√≠a espiritual y spam de flashes. Pones m√°s animalitos que utilidad real. Veganismo t√°ctico.",
  Reyna: "Duelo o lloras. Robas kills y luego pides cura. El alma m√°s pesada del lobby.",
  Yoru: "Te haces invisible para fallar igual. Juegas solo, mueres solo. Eres un highlight mal editado.",
  Fade: "Pesadillas, gatos y traumas. Pingueas m√°s que juegas. Fan de Tim Burton.",
  Chamber: "Sniper con acento. No pegas una pero caminas como modelo. Gabacho y orgulloso.",
  Harbor: "Escudo humano que nadie pidi√≥. Agua por aqu√≠, agua por all√° y ni una kill. Surfista zen.",
  Neon: "Velocidad sin direcci√≥n. Entras a site como si fuera TikTok. Parkour pero con lag.",
  Gekko: "Traes a la partida m√°s bichos que sentido com√∫n. Mono, rana, t√∫. Ternura in√∫til.",
  Astra: "Galaxias, humo y marihuana. Micromanager del zodiaco. M√°s tiempo en el mapa que en la partida.",
  Deadlock: "Met√≥dica y terca. Si pudieras, pondr√≠as trampas en el ba√±o de tus compis. Sucia camperaza.",
  Tejo: "Futuro, poder y un brazo bien cabr√≥n. Siempre entrando primero. Quieres ser main pero no sabes ni flashear.",
  KAYO: "Antiflashes, antiemo y anticompa√±erismo. Te apagas y te vas. Literalmente.",
  Cypher: "El esp√≠a eterno. Todo lo ves, todo lo sabes. Pero no sales de base.",
  Waylay: "Sigilosa y precisa. Haces m√°s da√±o psicol√≥gico que real. La main cuchillos de tu equipo.",
  Vyse: "Visual y cerebral. Tienes un l√°ser y a√∫n as√≠ fallas. Robas highlights en TikTok.",
  Brimstone: "Viejo pero confiable. Fumas m√°s que tu t√≠o en Navidad. Pap√° t√°ctico del equipo.",
  Iso: "Duelo o nada. Te crees John Wick y te deletean sin mirar. Mascarilla de flow, aim de bronce.",
  Clove: "Revives, confundes y sobrevives. Te mueres y vuelves como si nada. El drama eres t√∫."
};

// =======================
// Textos de preguntas (tus preguntas) ‚Äî sin puntos
// =======================
const QT = [
  { q: "¬øC√≥mo lidias con la derrota?",
    a: ["Aprendo del error y sigo","Rompo cosas virtuales","Culpo al lag","Medito y resucito"] },
  { q: "¬øQu√© har√≠as con 10 segundos antes de una ronda?",
    a: ["Dar instrucciones t√°cticas","Esconderme en un rinc√≥n","Bailar con tu bicho","Lanzar utilidad random"] },
  { q: "Si fueras un superh√©roe, ser√≠as...",
    a: ["El que salva a todos","El que hace volar cosas","El que hackea sistemas","El que viene del m√°s all√°"] },
  { q: "Te regalan un arma, eliges...",
    a: ["Una escopeta con colorines","Un sniper elegante","Una cl√°sica con estilo","Una que cure"] },
  { q: "¬øQu√© te saca de tus casillas?",
    a: ["Que ignoren tu estrategia","Que nadie entre a site","Que nadie te siga el humo","Que te roben la kill"] },
  { q: "Te obligan a jugar support, t√∫...",
    a: ["Aceptas y brillas igual","Te mueres sin flashear","Curar te da alergia","Spameas curas desde base"] },
  { q: "¬øTu frase antes de una partida?",
    a: ["Vamos a ganar esto","Les voy a partir la cara","Ojal√° no me flasheen","Estoy aqu√≠ por el meme"] },
  { q: "Tu emoji m√°s usado ser√≠a...",
    a: ["üî•","üß†","üí£","üå±"] },
  { q: "Tu sue√±o frustrado es...",
    a: ["Dominar a todos sin hablar","Ser streamer de terror","Ser influencer de moda t√°ctica","Pilotar un dron real"] },
  { q: "Tu frase de perfil ser√≠a...",
    a: ["Solo Dios puede juzgarme","Con estilo hasta para perder","Pap√° del equipo","Dominando desde las sombras"] },
  { q: "¬øCon qu√© frase cierras un clutch?",
    a: ["Easy peasy","Lo ten√≠a calculado","Ni me sud√≥","Ni sab√≠a que quedaba uno"] },
  { q: "Tu peor enemigo en partida es...",
    a: ["Los que fuman mal","Los que caminan con shift en base","Los que no pinguean","Los que gritan por todo"] },
  { q: "¬øQu√© haces si el spike cae en A y t√∫ est√°s en B?",
    a: ["Te teletransportas y finges no haberlo visto","Te quedas cubriendo mid","Intentas hacer ninja defuse en el otro site","Vas caminando y mueres solo"] },
  { q: "¬øQu√© personaje odiar√≠as en una ranked?",
    a: ["El que tira el spike y se va","El que entra corriendo solo","El que se cree sheriff del lobby","El que dronea con el equipo muerto"] },
  { q: "¬øQu√© haces cuando vas 0-9?",
    a: ["Decir 'warmup' y seguir","Decir que es culpa del matchmaking","Tirar el teclado por la ventana","Seguir flasheando a tu equipo"] }
];

// =======================
// Balanceador 27 agentes -> 9 por respuesta (9..1)
// - 15 preguntas * 4 respuestas = 60 respuestas
// - 60 * 9 = 540 asignaciones -> 540 / 27 = 20 apariciones por agente
// - Rotaciones coprimas con 27 para repartir pesos
// =======================
const AGENTS = [
  "Jett","Phoenix","Sage","Sova","Raze","Omen","Viper","Killjoy","Breach",
  "Skye","Reyna","Yoru","Fade","Chamber","Harbor","Neon","Gekko","Astra",
  "Deadlock","Tejo","KAYO","Cypher","Waylay","Vyse","Brimstone","Iso","Clove"
];

const K = 9; // agentes por respuesta
const SCORE = [9,8,7,6,5,4,3,2,1];
const STEP_Q = 11; // avance por pregunta (coprimo con 27)
const STEP_A = 7;  // avance por respuesta (coprimo con 27)
const N = AGENTS.length;

function buildBalancedQuestions() {
  const questions = [];
  for (let qi = 0; qi < QT.length; qi++) {
    const answers = [];
    for (let ai = 0; ai < 4; ai++) {
      const start = (qi * STEP_Q + ai * STEP_A) % N;
      const block = [];
      for (let t = 0; t < K; t++) block.push(AGENTS[(start + t) % N]);
      const points = {};
      for (let p = 0; p < K; p++) points[block[p]] = SCORE[p];
      answers.push({ text: QT[qi].a[ai], points });
    }
    questions.push({ question: QT[qi].q, answers });
  }
  return questions;
}

const questions = buildBalancedQuestions();

// ===== (Opcional) utilidades en consola =====
// validateAppearances(): verifica apariciones y puntos totales por agente
// simulateWinrate(30000): simula resultados para ver winrates aproximados
function validateAppearances() {
  const count = Object.fromEntries(AGENTS.map(a => [a, {apps:0,pts:0}]));
  for (const q of questions) for (const a of q.answers)
    for (const [who,pts] of Object.entries(a.points)) {
      count[who].apps++; count[who].pts += pts;
    }
  console.table(Object.entries(count).map(([k,v])=>({Agente:k, Apariciones:v.apps, Puntos:v.pts}))
    .sort((a,b)=>b.Puntos-a.Puntos));
}
function simulateWinrate(runs=30000){
  const wins = Object.fromEntries(AGENTS.map(a=>[a,0]));
  for (let r=0;r<runs;r++){
    const sc = Object.fromEntries(AGENTS.map(a=>[a,0]));
    for (const q of questions){
      const ans = q.answers[Math.floor(Math.random()*q.answers.length)];
      for (const [who,pts] of Object.entries(ans.points)) sc[who]+=pts;
    }
    const max = Math.max(...Object.values(sc));
    const ties = Object.entries(sc).filter(([k,v])=>v===max).map(([k])=>k);
    wins[ties[Math.floor(Math.random()*ties.length)]]++;
  }
  console.table(Object.entries(wins).map(([k,v])=>({Agente:k, Winrate:(v/runs*100).toFixed(2)+"%"}))
    .sort((a,b)=>parseFloat(b.Winrate)-parseFloat(a.Winrate)));
}

// =======================
// L√≥gica del quiz (tu misma UI)
// =======================
let currentQuestion = 0;
let scores = {};
let history = [];
const quizContainer = document.getElementById("quiz");
const resultContainer = document.getElementById("result");

function showQuestion() {
  const q = questions[currentQuestion];
  const questionHTML = `
    <div class="question">
      <h3>${q.question}</h3>
      <div class="options">
        ${q.answers.map((a, i) => `<button onclick="selectAnswer(${i})">${a.text}</button>`).join("")}
      </div>
    </div>`;
  quizContainer.innerHTML = questionHTML;
  resultContainer.innerHTML = "";
}

function selectAnswer(index) {
  const selected = questions[currentQuestion].answers[index];
  history.push(index);
  for (let agent in selected.points) {
    scores[agent] = (scores[agent] || 0) + selected.points[agent];
  }
  currentQuestion++;
  if (currentQuestion < questions.length) {
    showQuestion();
  } else {
    showResult();
  }
}

function goBack() {
  if (currentQuestion > 0) {
    const lastIndex = history.pop();
    const lastAnswer = questions[currentQuestion - 1].answers[lastIndex];
    for (let agent in lastAnswer.points) {
      scores[agent] -= lastAnswer.points[agent];
    }
    currentQuestion--;
    showQuestion();
  }
}

function showResult() {
  quizContainer.innerHTML = "";
  let best = null;
  let max = -1;
  for (let agent in scores) {
    if (scores[agent] > max) {
      max = scores[agent];
      best = agent;
    }
  }
  // Desempate aleatorio si hubiera empate exacto
  const top = Math.max(...Object.values(scores));
  const ties = Object.entries(scores).filter(([k,v])=>v===top).map(([k])=>k);
  if (ties.length>1) best = ties[Math.floor(Math.random()*ties.length)];

  const description = descriptions[best];
  const image = agents[best];
  resultContainer.innerHTML = `
    <h2>¬°Eres <span style="color:#ff4654">${best}</span>!</h2>
    <img src="${image}" alt="${best}" />
    <p style="font-size:18px; margin-top:15px;">${description}</p>
  `;
}

showQuestion();
</script>
</body>
</html>
